
# After: self.profiles_list_widget.addItem("GAP")
# Add already paired and connected devices below "GAP"
gap_index = self.profiles_list_widget.count() - 1

paired_devices = self.bluetooth_device_manager.get_paired_devices()
connected_devices = self.bluetooth_device_manager.get_connected_devices()

# Use a set to avoid duplicates
unique_devices = set(paired_devices.keys()).union(connected_devices.keys())

for device_address in unique_devices:
    device_item = QListWidgetItem(device_address)
    device_item.setFont(QFont("Arial", 10))
    device_item.setForeground(Qt.GlobalColor.black)
    gap_index += 1
    self.profiles_list_widget.insertItem(gap_index, device_item)